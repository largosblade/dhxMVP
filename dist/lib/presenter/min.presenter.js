$dhx.ui.mvp.presenters.declare({presenter:function(){"strict";var e={start:function(){var e=this;e.view;console.log("MAIN:PRESENTER: start from MAIN:PRESENTER")},destroy:function(){$dhx.debug.log("MAIN:PRESENTER: destroy from MAIN:PRESENTER")},sidebarOnSelectHandler:function(e,t){var s=$dhx.ui.mvp.presenters.get("presenter"),a=s.view;"logout"==e&&s.do_logout(),"logout"!=e&&("help"==e&&(e="help/1"),a._router.dispatch(e,!0),window.dhx4.callEvent("onSidebarSelect",[e,this.cells(e)])),window.screen.availWidth>1024&&("help/1"==e&&(e="help"),a.toolbar.setItemText("title",window.dhx4.template("<img src='assets/icons/64/#image#' width='32' style='position:relative;float:left; margin-top:10px; margin-right: 10px;' /><span style='font-weight: bold; font-size: 14px;'>#text#</span>",{text:a.sidebar.cells(e).getText().text,image:a.sidebar.cells(e).getText().text.toLowerCase()+".png"})))},toolbarOnClickHandler:function(e){var t=$dhx.ui.mvp.presenters.get("presenter");t.view;"logout"==e&&t.do_logout()},layoutOnExpandHandler:function(e){var t=$dhx.ui.mvp.presenters.get("presenter");t.view},do_logout:function(){var e=this;e.view;window.location.reload()},add_sidebar_buttons:function(){var e=this,t=e.view;t.sidebar.addItem({id:"help",text:"Help",icon:"help.png"}),window.screen.availWidth<1024&&t.sidebar.addItem([{id:"sep10",type:"separator"},{id:"logout",text:"Logout",icon:"logout.png"}])},adjust_to_mobile:function(){var e=this,t=e.view;try{window.screen.availWidth<1024?(t.layout.cells("b").setText("Stats"),t.layout.cells("b").collapse(),t.layout.cells("b").setText("Stats")):t.status_bar.setText("")}catch(s){console.log(s.stack)}},build_ui:function(){var e=this,t=e.view;$dhx.showDirections("Starting UI"),window.screen.availWidth>1024&&t._toolbar(),t.status_bar=t.sidebar.attachStatusBar(),e.add_sidebar_buttons(),t._layout(),e.adjust_to_mobile(),$dhx.hideDirections()},addBubble:function(e,t){var s=this,a=s.view,i=a.sidebar.cells(e).getBubble()||0;""===i&&(i=0),i=+i,i+=t,a.sidebar.cells(e).setBubble(i)},clearBubble:function(e){var t=this,s=t.view;s.sidebar.cells(e).clearBubble()},start_database:function(e){var t=this;t.view;$dhx.showDirections("Starting database ... ");var s={users:[],questions:[]};t.model.schema._set_start_data(s),console.warn("The application Presenter will add initial server data now"),t.model.schema.add_all_records_from_server({onSuccess:function(){t.build_ui(),e.onSuccess&&e.onSuccess()}})}};return e}()});