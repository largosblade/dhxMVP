$dhx.ui.mvp.models.declare({model:function(){"strict";var e=function(){var e={database:{id:"dhxMVP",description:"dhxMVP demo database",nolog:!0,migrations:[]},versions:{1:{users:{item:"user",defaults:{__v:{type:Number,"default":0,unique:!1,validate:{required:!0,mask_to_use:"",rules:""},ui:{form:{label:"__v",type:"hidden"},grid:{header:"__v",align:"left",coltype:"ro",width:"0"}}},_id:{type:String,"default":0,unique:!0,validate:{required:!0,mask_to_use:"",rules:""},ui:{form:{label:"_id",type:"hidden"},grid:{header:"_id",align:"left",coltype:"ro",width:"0"}}},type:{type:String,"default":"Xpert",unique:!1,validate:{required:!0,mask_to_use:"",rules:""},ui:{form:{label:"User Type",type:"hidden"},grid:{header:"User Type",align:"left",coltype:"ro",width:"0"}}},phone:{type:String,"default":null,unique:!1,validate:{required:!1,mask_to_use:"us_phone",rules:""},ui:{form:{label:"Phone",type:"input"},grid:{header:"Phone",align:"right",coltype:"ro",width:"0"}}},display_name:{type:String,"default":null,unique:!1,validate:{required:!0,mask_to_use:void 0,rules:"NotEmpty"},ui:{form:{label:"Display name",type:"input"},grid:{header:"Display name",align:"left",coltype:"ro",width:"0"}}},first_name:{type:String,"default":null,unique:!1,validate:{required:!0,mask_to_use:void 0,rules:"NotEmpty"},ui:{form:{label:"First name",type:"input"},grid:{header:"First name",align:"left",coltype:"ro",width:"120"}}},last_name:{type:String,"default":null,unique:!1,validate:{required:!0,mask_to_use:void 0,rules:""},ui:{form:{label:"Last name",type:"input"},grid:{header:"Last name",align:"left",coltype:"ro",width:"120"}}},bio:{type:String,"default":null,unique:!1,validate:{required:!0,mask_to_use:void 0,rules:""},ui:{form:{label:"Bio",type:"input",rows:6},grid:{header:"Bio",align:"left",coltype:"ro",width:"120"}}},title:{type:String,"default":null,unique:!1,validate:{required:!0,mask_to_use:void 0,rules:""},ui:{form:{label:"Title",type:"input"},grid:{header:"Title",align:"",coltype:"ro",width:""}}},organizations:{type:[],"default":[],unique:!1,validate:{required:!1,mask_to_use:void 0,rules:""},ui:{form:{label:"Organizations",type:"template"},grid:{header:"Organizations",align:"left",coltype:"ro",width:"0"}}},picture:{type:String,"default":null,unique:!1,validate:{required:!1,mask_to_use:void 0,rules:""},ui:{form:{label:"Picture",type:"container"},grid:{header:"Picture",align:"left",coltype:"ro",width:"0"}}},rate:{type:Number,"default":150,unique:!1,validate:{required:!0,mask_to_use:"currency",rules:""},ui:{form:{label:"Rate",type:"input"},grid:{header:"Rate",align:"left",coltype:"ro",width:"100"}}},primary_skills:{type:[],"default":[],unique:!1,validate:{required:!1,mask_to_use:void 0,rules:""},ui:{form:{label:"Primary skills",type:"hidden"},grid:{header:"Primary skills",align:"left",coltype:"ro",width:"0"}}},additional_skills:{type:[],"default":[],unique:!1,validate:{required:!1,mask_to_use:void 0,rules:""},ui:{form:{label:"Additional skills",type:"hidden"},grid:{header:"Additional skills",align:"left",coltype:"ro",width:"0"}}},invites:{type:[],"default":[],unique:!1,validate:{required:!1,mask_to_use:void 0,rules:""},ui:{form:{label:"Invites",type:"hidden"},grid:{header:"Invites",align:"left",coltype:"ro",width:"0"}}},other_skills:{type:String,"default":null,unique:!1,validate:{required:!1,mask_to_use:void 0,rules:""},ui:{form:{label:"Other skills",type:"hidden"},grid:{header:"Other skills",align:"left",coltype:"ro",width:"0"}}},availability:{type:Number,"default":30,unique:!1,validate:{required:!0,mask_to_use:void 0,rules:""},ui:{form:{label:"Availbility",type:"hidden"},grid:{header:"Availbility",align:"right",coltype:"ro",width:"0"}}},city:{type:String,"default":null,unique:!1,validate:{required:!0,mask_to_use:void 0,rules:""},ui:{form:{label:"City",type:"input"},grid:{header:"City",align:"left",coltype:"ro",width:"0"}}},state:{type:String,"default":null,unique:!1,validate:{required:!0,mask_to_use:void 0,rules:""},ui:{form:{label:"State",type:"input"},grid:{header:"State",align:"left",coltype:"ro",width:"0"}}},country:{type:String,"default":"USA",unique:!1,validate:{required:!0,mask_to_use:void 0,rules:""},ui:{form:{label:"Country",type:"input"},grid:{header:"Country",align:"left",coltype:"ro",width:"0"}}},experience:{type:Number,"default":0,unique:!1,validate:{required:!0,mask_to_use:void 0,rules:""},ui:{form:{label:"Experience",type:"input"},grid:{header:"Experience",align:"right",coltype:"ro",width:"0"}}},username:{type:String,"default":null,unique:!1,validate:{required:!0,mask_to_use:void 0,rules:"NotEmpty"},ui:{form:{label:"Username",type:"input"},grid:{header:"Username",align:"left",coltype:"ro",width:"120"}}},resume:{type:String,"default":null,unique:!1,validate:{required:!1,mask_to_use:void 0,rules:""},ui:{form:{label:"Resume",type:"hidden"},grid:{header:"Resume",align:"left",coltype:"ro",width:"0"}}},certifications:{type:String,"default":null,unique:!1,validate:{required:!1,mask_to_use:void 0,rules:""},ui:{form:{label:"Certifications",type:"hidden"},grid:{header:"Certifications",align:"left",coltype:"ro",width:"0"}}},default_org:{type:String,"default":null,unique:!1,validate:{required:!0,mask_to_use:"",rules:"NotEmpty"},ui:{form:{label:"Default Organization",type:"combo"},grid:{header:"Default Organization",align:"left",coltype:"coro",width:"150"}}},IS_Client:{type:Boolean,"default":!1,unique:!1,validate:{required:!0,mask_to_use:"",rules:""},ui:{form:{label:"Client",type:"btn2state"},grid:{header:"Client",align:"center",coltype:"acheck",width:"70"}}},IS_PM:{type:Boolean,"default":!1,unique:!1,validate:{required:!0,mask_to_use:"",rules:""},ui:{form:{label:"Project Manager",type:"btn2state"},grid:{header:"Project Manager",align:"center",coltype:"acheck",width:"70"}}},IS_Xpert:{type:Boolean,"default":!0,unique:!1,validate:{required:!0,mask_to_use:"",rules:""},ui:{form:{label:"Xpert",type:"btn2state"},grid:{header:"Xpert",align:"center",coltype:"acheck",width:"70"}}},MC_ADMIN:{type:Boolean,"default":!0,unique:!1,validate:{required:!0,mask_to_use:"",rules:""},ui:{form:{label:"MindCrowd Admin.",type:"btn2state"},grid:{header:"MindCrowd Admin.",align:"center",coltype:"acheck",width:"70"}}}}}}}},t={database:e.database,versions:e.versions};return t}();return e.data=function(){var t={},i={},r={_collections:t,start:function(){var a=function(){};for(var d in t)i[t[d].item]=Backbone.Model.extend({database:e.database,storeName:d,nolog:!0,defaults:t[d].defaults,initialize:a}),i[d]=Backbone.Collection.extend({model:i[t[d].item],database:e.database,nolog:!0,storeName:d}),r[t[d].item]=function(e){return function(r){return $dhx.debug.log(e),$dhx.debug.log(t[e].item),new i[t[e].item](r)}}(d),r[d]=function(e){return $dhx.debug.log(e),function(){return $dhx.debug.log(e),$dhx.debug.log(t[e].item),new i[e]}}(d);$dhx.debug.log(r)}};return r}(),e.schema=function(){var t={setup:function(i){var r,a=t,d=null,l=function(){for(d in e.versions){var t=Object.keys(e.versions[d]);t.forEach(function(t){$dhx.debug.log("store name: ",t);var i=e.versions[d][t],r={};for(var a in i.defaults){var l=i.defaults[a];r[a]=l["default"]}e.data._collections[t]={item:i.item,defaults:r}}),r={version:parseInt(d),migrate:function(t,i){var r=[],a=Object.keys(e.versions[d]),l=a.length,o=0;$dhx.debug.log("store_names: ",a),a.forEach(function(i){var a=e.versions[d][i];r[i]=null,t.db.objectStoreNames.contains(i)||(r[i]=t.db.createObjectStore(i)),r[i]=t.objectStore(i);for(var n in a.defaults){var u=a.defaults[n];r[i].createIndex(n,n,{unique:u.unique||!1})}t.addEventListener("complete",function(e){o+=1,$dhx.debug.log(o,l),o==l&&$dhx.debug.log(window.model.data._collections)}),t.onsuccess=function(e){$dhx.debug.log(e)},t.addEventListener("success",function(e){$dhx.debug.log(e)})}),i()}},e.database.migrations.push(r)}a.create_database(i,e)};try{var o=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB,n=o.deleteDatabase(e.database.id);n.onsuccess=function(t){$dhx.debug.log("indexedDB: "+e.database.id+" deleted"),l()},n.onerror=function(e){$dhx.debug.error("indexedDB.delete Error: "+e.message),l()}}catch(u){$dhx.debug.error("Error: "+u.message),l()}},get_collection_meta:function(t,i){var r=Object.keys(e.versions[t]),a=!1;return r.forEach(function(r){r==i&&($dhx.debug.log("store name: ",r),a=e.versions[t][r])}),a},get_collection_item:function(t,i){var r=Object.keys(e.versions[t]),a=!1;return $dhx.debug.log("model.versions: ",e.versions),$dhx.debug.log("version: ",t),$dhx.debug.log("model.versions[ version ]: ",e.versions[t]),r.forEach(function(r){r==i&&($dhx.debug.log(r,i),a=e.versions[t][r].item)}),a},create_database:function(e,i){var r=t,a=Object.keys(initial_data),d=(a.length,[]),l=[],o=[],n=[],u=null,s=function(e,t,i){var a=i.shift();collection_name=t.shift(),t.length>0&&i.length>0?($dhx.debug.log("XXXXXXXXXX> "+a,collection_name),r.insert_records_into_table(d[a],collection_name,function(r,a){s(e,t,i)})):e&&e()};$dhx.debug.log(a),a.forEach(function(e,t){u=i.schema.get_collection_item(1,e),d[u]=Backbone.Model.extend({database:i.database,storeName:e}),l[e]=Backbone.Collection.extend({database:i.database,storeName:e,model:d[u]}),o.push(e),n.push(u),$dhx.debug.log("--"),$dhx.debug.log("item: ",u),$dhx.debug.log("collection: ",e),$dhx.debug.log("models[ item ]: ",d[u]),$dhx.debug.log("collections[ collection ]: ",l[e]),$dhx.debug.log("c_names: ",o),$dhx.debug.log("m_names: ",n)}),s(function(){e.onSetup&&e.onSetup()},o,n)},insert_records_into_table:function(e,i,r){var a=t,d=initial_data[i].shift();if($dhx.debug.warn(" ---------------- "),$dhx.debug.log("adding records to: ",i),d){$dhx.debug.log(d),$dhx.debug.log("adding records to: ",i);var l=new e;$dhx.debug.log("record: ",d),$dhx.debug.log("model: ",l),l.save(d,{success:function(){$dhx.debug.info("success inserting record: ",d),$dhx.debug.warn("props: ",Object.keys(d).length),$dhx.debug.log(arguments),a.insert_records_into_table(e,i,r)},error:function(e,t){console.error(t.srcElement.error.message),console.error("error inserting record: ",d),$dhx.debug.warn("props: ",Object.keys(d).length),$dhx.debug.log(e,t)}})}else $dhx.debug.log("done inserting records into: ",i),$dhx.debug.warn(" ---------------- "),r(e,i)},start:function(i){var r=t;i.onSetup=function(){try{$dhx.debug.log("model.schema setup is done!"),e.data.start(),$dhx.debug.log(e.data._collections),$dhx.debug.log(e.data);var t="skills";$dhx.debug.log("name ",t),$dhx.debug.log(e.data[t]()),e.data[t]().fetch({success:function(e,t,r){$dhx.debug.log(e),i.onSuccess&&i.onSuccess(),$dhx.debug.log(e.models)},error:function(e,t,i){$dhx.debug.log(e)}})}catch(r){$dhx.debug.log(r.stack)}},r.setup(i)},io:{user:{update:function(t){var i="string"==typeof t.record?JSON.parse(t.record):t.record,r=new e.data.user({id:i._id});r.save(i,{success:function(){t.onSuccess&&t.onSuccess()},error:function(e,i){dhtmlx.alert({text:"Error saving user data",type:"alert-error"}),t.onFail&&t.onFail()}})}}}};return API={start:t.start,skills:function(){return t.skills},get_collection_meta:t.get_collection_meta,get_collection_item:t.get_collection_item,io:t.io},API}(),e}()});