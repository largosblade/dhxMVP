$dhx.ui.mvp.views.declare({customer_servers:function(){"strict";var e="customer_servers",t="servers",i=$dhx.ui.mvp.child_view.extend({}),s=new i({_settings:{layout:{pattern:"1C",cells:[{id:"a",text:"Assigned servers"}]},toolbar:{icon_path:"",items:[{id:"assign_server",type:"button",img:"server.png",img_disabled:"server.png",text:"Assign Server",tooltip:"Assign Server"}]},grid:{header:[],id:[],width:["0","0","*","100","120","90","0","0","0","0"],colAligns:[],colTypes:[]},grid_ips:{header:[],id:[],width:[],colAligns:[],colTypes:[]},toolbar_item:{icon_path:"",items:[{id:"text",type:"text",text:" "},{type:"spacer"},{id:"close",type:"button",img:"close.png",text:"close",tooltip:"Close job."}]},form:{template:[]},form_item:{template:[{type:"settings",position:"label-left",labelWidth:130,inputWidth:$dhx.ui.mvp.ui.isMobile?270:500,offsetLeft:10}]}},layout:null,toolbar:null,grid:null,grid_ips:null,form:null,toolbar_item:null,form_item:null,initialize:function(e){console.log("CHILD:VIEW:: called initialize from "+t+"_view.initialize")},destroy:function(){var e=this;console.log("called destroy from "+t+".view"),e.grid&&(e.grid.destructor(),e.grid=null),e.layout&&(e.layout.unload(),e.layout=null)},_layout:function(t){var i=this;return null===i.layout&&(t?i.layout=t.attachLayout(i._settings.layout):i.layout=i._wrapper.cells(e).attachLayout(i._settings.layout)),i.layout},_toolbar:function(){var e=this;return null===e.toolbar&&(e._settings.toolbar.icons_path=e.icons_path,e.toolbar=e.layout.cells("a").attachToolbar(e._settings.toolbar),e.toolbar.attachEvent("onClick",e.presenter.toolbarOnClickHandler)),e.toolbar},_grid:function(){var e=this,i=e.presenter.model.versions[1][t].defaults;if(null===e.grid){for(var s in i)e._settings.grid.id.push(s),e._settings.grid.header.push(i[s].ui.grid.header),e._settings.grid.colAligns.push(i[s].ui.grid.align),e._settings.grid.colTypes.push(i[s].ui.grid.coltype);e.grid=e.layout.cells("a").attachGrid(),e.grid.setHeader(e._settings.grid.header.join(",")),e.grid.setColumnIds(e._settings.grid.id.join(",")),e.grid.enableAutoWidth(!0),e.grid.setInitWidths(e._settings.grid.width.join(",")),console.log(e._settings.grid.id.join(",")),console.log(e._settings.grid.width.join(",")),console.log(e._settings.grid.colAligns.join(",")),console.log(e._settings.grid.colTypes.join(",")),e.grid.setColAlign(e._settings.grid.colAligns.join(",")),e.grid.setColTypes(e._settings.grid.colTypes.join(",")),e.grid.enableMultiline(!1),e.grid.setColumnHidden(e.grid.getColIndexById("description"),!0),e.grid.init(),e.grid.enableEditEvents(!1,!1,!1),e.grid.attachEvent("onRowSelect",e.presenter.gridOnRowSelectHandler)}return e.grid},_grid_ips:function(){var e,t=this,i=t.presenter.model.versions[1].ips.defaults;if(null===t.grid_ips)for(var s in i)t._settings.grid_ips.id.push(s),t._settings.grid_ips.header.push(i[s].ui.grid.header),t._settings.grid_ips.colAligns.push(i[s].ui.grid.align),t._settings.grid_ips.colTypes.push(i[s].ui.grid.coltype);return e=t.form.getContainer("assign_ip"),e.style.height="150px",t.grid_ips=new dhtmlXGridObject(e.id),t.grid_ips.setHeader(t._settings.grid_ips.header.join(",")+",Assign"),t.grid_ips.setColumnIds(t._settings.grid_ips.id.join(",")+",assigned"),t.grid_ips.enableAutoWidth(!0),t.grid_ips.setInitWidths("0,0,0,0,*,90,0,90"),t.grid_ips.setColAlign(t._settings.grid_ips.colAligns.join(",")+",center"),t.grid_ips.setColTypes(t._settings.grid_ips.colTypes.join(",")+",acheck"),t.grid_ips.enableMultiline(!1),t.grid_ips.init(),t.grid_ips.enableEditEvents(!1,!1,!1),t.grid_ips},_form:function(e,i){var s=this;s.presenter.model.versions[1][t].defaults;return null!==this.form&&(s.form.unload(),s.form=null),s._settings.form.template=[{type:"settings",position:"label-top",labelWidth:$dhx.ui.mvp.ui.isMobile?240:500,inputWidth:$dhx.ui.mvp.ui.isMobile?240:500,offsetLeft:10}],s._settings.form.template.push({type:"combo",name:"provider",label:"Provider",required:!0,validate:"NotEmpty"}),s._settings.form.template.push({type:"combo",name:"server",label:"Server",required:!0,validate:"NotEmpty"}),s._settings.form.template.push({type:"input",name:"price",label:"Price",required:!0,validate:"NotEmpty",mask_to_use:"currency"}),s._settings.form.template.push({type:"calendar",name:"expiration",label:"Expiration",required:!0,validate:"NotEmpty",readonly:!0}),s._settings.form.template.push({type:"container",name:"assign_ip",label:"Assign IPs"}),s._settings.form.template.push({type:"block",list:[{type:"settings",position:"label-right",offsetLeft:0},{type:"checkbox",name:"close_on_save",label:"Close on assign",checked:!0}]}),s._settings.form.template.push({type:"block",list:[{type:"button",name:"save",value:"Assign Server"},{type:"newcolumn"},{type:"button",name:"reset",value:"Reset form"}]}),s.form=new $dhx.component.form({id:t+".form",parent:e,settings:s._settings.form}),s.form.action=i,s.form.attachEvent("onButtonClick",s.presenter.formOnButtonClickHandler),s.form.attachEvent("onEnter",s.presenter.formOnEnterHandler),s.form},strWindowID:"dhxMVP."+t+".view.window.",window:null,window_status_bar:null,_window:function(){var e,t,i=this;return null===i.window&&(e=$dhx.ui.mvp.ui.isMobile?270:550,t=570,i.window=new $dhx.ui.mvp.ui.window({id:i.strWindowID,width:e,height:t}),i.window.centerOnScreen(),i.window.button("park").hide(),i.window.button("stick").hide(),i.window.attachEvent("onClose",function(e){return i.form.unload(),i.form=null,i.window=null,i.toolbar.enableItem("assign_server"),!0}),i.window_status_bar=i.window.attachStatusBar()),i.window},render:function(){var e=this,t=!1;t=arguments[0],e._layout(t),e._toolbar(),e._grid(),e.presenter.model.schema.io.providers.readAll({onSuccess:function(t,i,s){t.forEach(function(t){e.grid.getCombo(e.grid.getColIndexById("provider")).put(t.get("id"),t.get("name"))}),e.presenter.fill_grid()},onFail:function(){}})}});return s}()});