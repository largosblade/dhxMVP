$dhx.ui.mvp.views.declare({servers:function(){"strict";var t="servers",e="servers",i=$dhx.ui.mvp.child_view.extend({}),o=new i({_settings:{layout:{pattern:"2U",cells:[{id:"a",text:"Servers Management"},{id:"b",text:"Select a Server first"}]},toolbar:{icon_path:"",items:[{id:"create",type:"button",img:"add.png",text:"Add new",tooltip:"Add new"},{id:"update",type:"button",img:"update.png",img_disabled:"update.png",text:"Update item",tooltip:"Update item",disabled:!0},{id:"destroy",type:"button",img:"delete.png",img_disabled:"delete.png",text:"Delete item",tooltip:"Delete item",disabled:!0}]},grid:{header:[],id:[],width:[],colAligns:[],colTypes:[]},toolbar_item:{icon_path:"",items:[{id:"text",type:"text",text:" "},{type:"spacer"},{id:"close",type:"button",img:"close.png",text:"close",tooltip:"Close job."}]},form:{template:[]},form_item:{template:[{type:"settings",position:"label-left",labelWidth:130,inputWidth:$dhx.ui.mvp.ui.isMobile?270:500,offsetLeft:10}]}},layout:null,toolbar:null,grid:null,form:null,toolbar_item:null,form_item:null,initialize:function(t){console.log("CHILD:VIEW:: called initialize from "+e+"_view.initialize")},destroy:function(){var t=this;console.log("called destroy from "+e+".view"),t.grid&&(t.grid.destructor(),t.grid=null),t.layout&&(t.layout.unload(),t.layout=null)},_layout:function(e){var i=this;return null===i.layout&&(e?i.layout=e.attachLayout(i._settings.layout):i.layout=i._wrapper.cells(t).attachLayout(i._settings.layout),i.layout.cells("a").setWidth(300),i.layout.cells("b").collapse()),i.layout},_toolbar:function(){var t=this;return null===t.toolbar&&(t._settings.toolbar.icons_path=t.icons_path,t.toolbar=t.layout.cells("a").attachToolbar(t._settings.toolbar),t.toolbar.attachEvent("onClick",t.presenter.toolbarOnClickHandler)),t.toolbar},_grid:function(){var t=this,i=t.presenter.model.versions[1][e].defaults;if(null===t.grid){for(var o in i)t._settings.grid.id.push(o),t._settings.grid.header.push(i[o].ui.grid.header),t._settings.grid.width.push(i[o].ui.grid.width),t._settings.grid.colAligns.push(i[o].ui.grid.align),t._settings.grid.colTypes.push(i[o].ui.grid.coltype);t.grid=t.layout.cells("a").attachGrid(),t.grid.setHeader(t._settings.grid.header.join(",")),t.grid.setColumnIds(t._settings.grid.id.join(",")),t.grid.enableAutoWidth(!0),t.grid.setInitWidths(t._settings.grid.width.join(",")),t.grid.setColAlign(t._settings.grid.colAligns.join(",")),t.grid.setColTypes(t._settings.grid.colTypes.join(",")),t.grid.enableMultiline(!1),t.grid.setColumnHidden(t.grid.getColIndexById("description"),!0),t.grid.init(),t.grid.enableEditEvents(!1,!1,!1),t.grid.attachEvent("onRowSelect",t.presenter.gridOnRowSelectHandler)}return t.grid},_toolbar_item:function(){var t=this;return null===t.toolbar_item&&(t._settings.toolbar_item.icons_path=t.icons_path,t.toolbar_item=t.layout.cells("b").attachToolbar(t._settings.toolbar_item),t.toolbar_item.attachEvent("onClick",t.presenter.toolbar_itemOnClickHandler)),t.toolbar_item},_form_item:function(t){var e,i=this;return null!==i.form_item&&(i.form_item.unload(),i.form_item=null),e=i.grid.getSelectedRowId(),i._settings.form_item.template=[{type:"settings",position:"label-left",labelWidth:250,offsetLeft:10}],i._settings.grid.id.forEach(function(e,o){var n=i._settings.grid.header[o],r=(i.grid.getColType(0),bold_text),l=t.get(e);$dhx.debug.log(e,l),"provider"==e&&(l=i.grid.cells(t.get("id"),i.grid.getColIndexById("provider")).getText()),"expiration"==e&&(l=new Date(l).toISOString(),r=moment_to),"purchase"==e&&(l=new Date(l).toISOString(),r=moment_fromNow),"price"==e&&(r=myprice),"__v"!=e&&"_id"!=e&&("string"==typeof l&&(l=l.replace(/\n/g,"<br>")),i._settings.form_item.template.push({type:"template",name:e,label:n+":",value:l,format:r}))}),i.form_item=i.layout.cells("b").attachForm(i._settings.form_item.template),i.form_item.attachEvent("onButtonClick",function(t){}),i.form_item},_form:function(t,i){var o=this,n=o.presenter.model.versions[1][e].defaults;return null!==this.form&&(o.form.unload(),o.form=null),o._settings.form.template=[{type:"settings",position:"label-top",labelWidth:$dhx.ui.mvp.ui.isMobile?240:500,inputWidth:$dhx.ui.mvp.ui.isMobile?240:500,offsetLeft:10}],o.form=new $dhx.component.form({id:e+".form",parent:t,settings:o._settings.form,defaults:n}),o.form.action=i,o.form.attachEvent("onButtonClick",o.presenter.formOnButtonClickHandler),o.form.attachEvent("onEnter",o.presenter.formOnEnterHandler),o.form},strWindowID:"dhxMVP."+e+".view.window.",window:null,window_status_bar:null,_window:function(){var t,e,i=this;return null===i.window&&(t=$dhx.ui.mvp.ui.isMobile?270:550,e=570,i.window=new $dhx.ui.mvp.ui.window({id:i.strWindowID,width:t,height:e}),i.window.centerOnScreen(),i.window.button("park").hide(),i.window.button("stick").hide(),i.window.attachEvent("onClose",function(t){return i.form.unload(),i.form=null,i.window=null,!0}),i.window_status_bar=i.window.attachStatusBar()),i.window},render:function(){var t=this,e=!1;e=arguments[0],t._layout(e),t._toolbar(),t._grid(),t.presenter.model.schema.io.providers.readAll({onSuccess:function(e,i,o){e.forEach(function(e){t.grid.getCombo(t.grid.getColIndexById("provider")).put(e.get("id"),e.get("name"))}),t.presenter.fill_grid()},onFail:function(){}})}});return o}()});