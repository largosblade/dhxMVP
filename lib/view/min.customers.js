$dhx.ui.mvp.views.declare({customers:function(){"strict";var t="customers",e="customers",i=$dhx.ui.mvp.child_view.extend({}),o=new i({_settings:{layout:{pattern:"2U",cells:[{id:"a",text:"Customers Management"},{id:"b",text:"Select a customer first"}]},accordion:{icons_path:"",dnd:!0,items:[{id:"a",text:"Overall information",open:!0},{id:"b",text:"Assigned Servers",open:!1},{id:"c",text:"Assigned IPs",open:!1},{id:"d",text:"Notes",open:!1}]},toolbar:{icon_path:"",items:[{id:"create",type:"button",img:"add.png",text:"Add new",tooltip:"Add new"},{id:"update",type:"button",img:"update.png",img_disabled:"update.png",text:"Update item",tooltip:"Update item",disabled:!0},{id:"destroy",type:"button",img:"delete.png",img_disabled:"delete.png",text:"Delete item",tooltip:"Delete item",disabled:!0}]},grid:{header:[],id:[],width:[],colAligns:[],colTypes:[]},grid_notes:{header:["Note"],id:["note"],width:["*"],colAligns:["left"],colTypes:["ro"]},toolbar_item:{icon_path:"",items:[{id:"text",type:"text",text:" "},{type:"spacer"},{id:"close",type:"button",img:"close.png",text:"close",tooltip:"Close job."}]},form:{template:[]},form_item:{template:[{type:"settings",position:"label-left",labelWidth:130,inputWidth:$dhx.ui.mvp.ui.isMobile?270:500,offsetLeft:10}]}},layout:null,toolbar:null,grid:null,grid_notes:null,form:null,accordion:null,toolbar_item:null,form_item:null,initialize:function(t){$dhx.debug.log("CHILD:VIEW:: called initialize from "+e+"_view.initialize")},destroy:function(){var t=this;console.log("called destroy from "+e+".view"),t.grid&&(t.grid.destructor(),t.grid=null),t.layout&&(t.layout.unload(),t.layout=null)},_layout:function(){var e=this;return null===e.layout&&(e.layout=e._wrapper.cells(t).attachLayout(e._settings.layout),e.layout.cells("a").setWidth(300),e.layout.cells("b").collapse()),e.layout},_toolbar:function(){var t=this;return null===t.toolbar&&(t._settings.toolbar.icons_path=t.icons_path,t.toolbar=t.layout.attachToolbar(t._settings.toolbar),t.toolbar.attachEvent("onClick",t.presenter.toolbarOnClickHandler)),t.toolbar},_grid:function(){var t=this,i=t.presenter.model.versions[1][e].defaults;if(null===t.grid){for(var o in i)t._settings.grid.id.push(o),t._settings.grid.header.push(i[o].ui.grid.header),t._settings.grid.width.push(i[o].ui.grid.width),t._settings.grid.colAligns.push(i[o].ui.grid.align),t._settings.grid.colTypes.push(i[o].ui.grid.coltype);t.grid=t.layout.cells("a").attachGrid(),t.grid.setHeader(t._settings.grid.header.join(",")),t.grid.setColumnIds(t._settings.grid.id.join(",")),t.grid.enableAutoWidth(!0),t.grid.setInitWidths(t._settings.grid.width.join(",")),console.log(t._settings.grid.id.join(",")),console.log(t._settings.grid.width.join(",")),t.grid.setColAlign(t._settings.grid.colAligns.join(",")),t.grid.setColTypes(t._settings.grid.colTypes.join(",")),t.grid.enableMultiline(!1),t.grid.setColumnHidden(t.grid.getColIndexById("description"),!0),t.grid.init(),t.grid.enableEditEvents(!1,!1,!1),$dhx.ui.data["static"].countries.forEach(function(e){t.grid.getCombo(t.grid.getColIndexById("country")).put(e.code,e.name+", "+e.dial_code)}),t.grid.attachEvent("onRowSelect",t.presenter.gridOnRowSelectHandler)}return t.grid},_accordion:function(){var t=this;return null===t.accordion&&(t._settings.accordion.icons_path=t.icons_path,t.accordion=t.layout.cells("b").attachAccordion(t._settings.accordion),t.accordion.attachEvent("onActive",function(e,i){"files"==e&&t.list_files()})),t.accordion.cells("a").open(),t.accordion},_grid_notes:function(){var t,e=this;return null===e.grid_notes&&(t=e.form.getContainer("notes"),t.style.height="150px",e.grid_notes=new dhtmlXGridObject(t.id),e.grid_notes.setHeader(e._settings.grid_notes.header.join(",")),e.grid_notes.setColumnIds(e._settings.grid_notes.id.join(",")),e.grid_notes.enableAutoWidth(!0),e.grid_notes.setInitWidths(e._settings.grid_notes.width.join(",")),e.grid_notes.setColAlign(e._settings.grid_notes.colAligns.join(",")),e.grid_notes.setColTypes(e._settings.grid_notes.colTypes.join(",")),e.grid_notes.enableMultiline(!1),e.grid_notes.init(),e.grid_notes.enableEditEvents(!1,!1,!1),e.grid_notes.attachEvent("onRowSelect",e.presenter.gridOnRowSelectHandler)),e.grid_notes},_toolbar_item:function(){var t=this;return null===t.toolbar_item&&(t._settings.toolbar_item.icons_path=t.icons_path,t.toolbar_item=t.accordion.attachToolbar(t._settings.toolbar_item),t.toolbar_item.attachEvent("onClick",t.presenter.toolbar_itemOnClickHandler)),t.toolbar_item},_form_item:function(t){var e,i=this;return null!==i.form_item&&(i.form_item.unload(),i.form_item=null),e=i.grid.getSelectedRowId(),i._settings.form_item.template=[{type:"settings",position:"label-left",labelWidth:250,offsetLeft:10}],i._settings.grid.id.forEach(function(e,o){var n=i._settings.grid.header[o],r=(i.grid.getColType(0),bold_text),l=t.get(e);$dhx.debug.log(e,l),console.log(e,l),"country"==e&&(l=i.grid.cells(t.get("id"),i.grid.getColIndexById("country")).getText()),"expiration"==e&&(l=new Date(l).toISOString(),r=moment_to),"maintenance"==e&&(l=l?"yes":"no"),"__v"!=e&&"_id"!=e&&"assigned_servers"!=e&&"archive"!=e&&"notes"!=e&&("string"==typeof l&&(l=l.replace(/\n/g,"<br>")),i._settings.form_item.template.push({type:"template",name:e,label:n+":",value:l,format:r}))}),i.form_item=i.accordion.cells("a").attachForm(i._settings.form_item.template),i.form_item.attachEvent("onButtonClick",function(t){}),i.form_item},_form:function(t,i){var o=this,n=o.presenter.model.versions[1][e].defaults;null!==this.form&&(o.form.unload(),o.form=null),o._settings.form.template=[{type:"settings",position:"label-top",labelWidth:$dhx.ui.mvp.ui.isMobile?240:500,inputWidth:$dhx.ui.mvp.ui.isMobile?240:500,offsetLeft:10}];var r;for(var l in n)"_id"!=l&&"__v"!=l&&"assigned_servers"!=l&&"notes"!=l&&(r={type:n[l].ui.form.type,name:l,label:n[l].ui.form.label,value:n[l]["default"]||"",required:n[l].validate.required||!1,validate:n[l].validate.rules||"",mask_to_use:n[l].validate.mask_to_use||""},n[l].ui.note&&n[l].ui.note.length>0&&(r.note={text:n[l].ui.note},r.tooltip=n[l].ui.note,r.info=!0),n[l].ui.form.options&&(r.options=n[l].ui.form.options),n[l].ui.maxLength&&$dhx.isNumber(n[l].ui.maxLength)&&parseInt(n[l].ui.maxLength)>0&&(r.maxLength=n[l].ui.maxLength),o._settings.form.template.push(r));return o._settings.form.template.push({type:"block",list:[{type:"settings",position:"label-right",offsetLeft:0},{type:"checkbox",name:"close_on_save",label:"Close on save",checked:!0}]}),o._settings.form.template.push({type:"block",list:[{type:"button",name:"save",value:"Save item"},{type:"newcolumn"},{type:"button",name:"reset",value:"Reset form"}]}),o.form=new $dhx.component.form({id:e+".form",parent:t,settings:o._settings.form}),o.form.action=i,o.form.attachEvent("onButtonClick",o.presenter.formOnButtonClickHandler),o.form.attachEvent("onEnter",o.presenter.formOnEnterHandler),o.form},strWindowID:"dhxMVP."+e+".view.window.",window:null,window_status_bar:null,_window:function(){var t,e,i=this;return null===i.window&&(t=$dhx.ui.mvp.ui.isMobile?270:570,e=530,i.window=new $dhx.ui.mvp.ui.window({id:i.strWindowID,width:t,height:e}),i.window.centerOnScreen(),i.window.button("park").hide(),i.window.button("stick").hide(),i.window.attachEvent("onClose",function(t){return i.form.unload(),i.form=null,i.window=null,!0}),i.window_status_bar=i.window.attachStatusBar()),i.window},render:function(){var t=this;$dhx.debug.log("CHILD:VIEW:: rendering view"),t._layout(),t._toolbar(),t._grid(),t.presenter.fill_grid(),$dhx.debug.log(this)}});return o}()});